package com.spaceboyross.gundam.containers;

import com.spaceboyross.gundam.ms.MobileSuit;

import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.inventory.Container;
import net.minecraft.inventory.Slot;
import net.minecraft.item.ItemStack;
import net.minecraft.util.NonNullList;

public class ContainerMobileSuitInventory extends Container {
	
	private MobileSuit.MSEntity msEntity;
	
	public ContainerMobileSuitInventory(MobileSuit.MSEntity msEntity) {
		this.msEntity = msEntity;
		
		int i = this.msEntity.getMSRegistryEntry().getArmamentCount();
		for(int y = 0;y < (this.msEntity.inventory.getSizeInventory()-this.msEntity.getMSRegistryEntry().getArmamentCount())/3;y++) {
			for(int x = 0;x < (this.msEntity.inventory.getSizeInventory()-this.msEntity.getMSRegistryEntry().getArmamentCount())/10;x++) {
				this.addSlotToContainer(new Slot(this.msEntity.inventory,i++,x*18,y*18));
			}
		}
		
		for(i = 0;i < this.msEntity.getMSRegistryEntry().getArmamentCount();i++) {
			this.addSlotToContainer(new Slot(this.msEntity.inventory,i,i*18,((this.msEntity.inventory.getSizeInventory()-this.msEntity.getMSRegistryEntry().getArmamentCount())/3)*18));
		}
	}

	@Override
	public boolean canInteractWith(EntityPlayer playerIn) {
		return playerIn.isRiding() ? playerIn.getRidingEntity() instanceof MobileSuit.MSEntity : false;
	}
	
	@Override
    public ItemStack transferStackInSlot(EntityPlayer playerIn,int slotIndex) {
		if(slotIndex >= 0 && slotIndex < this.msEntity.getMSRegistryEntry().getArmamentCount()) return null;
		Slot slot = (Slot)inventorySlots.get(slotIndex);
		return slot.getStack();
	}

}
